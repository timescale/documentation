---
title: Integrate Amazon Sagemaker with Tiger Cloud
sidebarTitle: Amazon SageMaker
description: Amazon SageMaker is a fully managed machine learning service. Integrate Amazon SageMaker with Tiger Cloud to store and analyze ML model data
keywords: [Amazon SageMaker, machine learning, ML, AI, model training, model deployment, data science, AWS, ML models, predictions]
---


import IntegrationPrereqs from '/snippets/prerequisites/_integration-prereqs.mdx';
import CreateHypertablePolicyNote from '/snippets/manage-data/_create-hypertable-columnstore-policy-note.mdx';
import { CLOUD_LONG, CONSOLE, PG, SERVICE_SHORT, HYPERTABLE_CAP } from '/snippets/vars.mdx';


Integrate [Amazon SageMaker AI][amazon-sagemaker] with a {SERVICE_LONG}, and quickly and confidently build, train,
and deploy ML models into a production-ready hosted environment.

## Prerequisites

<IntegrationPrereqs />

* Set up an [AWS Account][aws-sign-up]

## Prepare your Tiger Cloud service to ingest data from SageMaker

Create a table in {SERVICE_LONG} to store model predictions generated by SageMaker.

1. **Connect to your {SERVICE_LONG}**

   For {CLOUD_LONG}, open an [SQL editor][run-queries] in [{CONSOLE}][console]. For {SELF_LONG}, use [`psql`][psql].

2. **For better performance and easier real-time analytics, create a {HYPERTABLE}**

   [{HYPERTABLE_CAP}s][about-hypertables] are {PG} tables that automatically partition your data by time. You interact
   with {HYPERTABLE}s in the same way as regular {PG} tables, but with extra features that makes managing your
   time-series data much easier.

   ```sql
   CREATE TABLE model_predictions (
     time TIMESTAMPTZ NOT NULL,
     model_name TEXT NOT NULL,
     prediction DOUBLE PRECISION NOT NULL
   ) WITH (
     tsdb.hypertable
   );
   ```
   <CreateHypertablePolicyNote />

## Create the code to inject data into a Tiger Cloud service

1. **Create a SageMaker Notebook instance**

   1. In [Amazon SageMaker > Notebooks and Git repos][aws-notebooks-git-repos], click `Create Notebook instance`.
   2. Follow the wizard to create a default Notebook instance.

2. **Write a Notebook script that inserts data into your {SERVICE_LONG}**

   1. When your Notebook instance is `inService,` click `Open JupyterLab` and click `conda_python3`.
   2. Update the following script with your [connection details][connection-info], then paste it in the Notebook.

      ```python
      import psycopg2
      from datetime import datetime

      def insert_prediction(model_name, prediction, host, port, user, password, dbname):
            conn = psycopg2.connect(
               host=host,
               port=port,
               user=user,
               password=password,
               dbname=dbname
            )
            cursor = conn.cursor()

            query = """
               INSERT INTO model_predictions (time, model_name, prediction)
               VALUES (%s, %s, %s);
            """

            values = (datetime.utcnow(), model_name, prediction)
            cursor.execute(query, values)
            conn.commit()

            cursor.close()
            conn.close()

      # Example usage
      insert_prediction(
            model_name="example_model",
            prediction=0.95,
            host="<host>",
            port="<port>",
            user="<user>",
            password="<password>",
            dbname="<dbname>"
      )
      ```

3. **Test your SageMaker script**

   1. Run the script in your SageMaker notebook.
   2. Verify that the data is in your {SERVICE_SHORT}

      Open an [SQL editor][run-queries] and check the `sensor_data` table:

      ```sql
      SELECT * FROM model_predictions;
      ```
      You see something like:

      |time	| model_name | prediction |
      | -- | -- | -- |
      |2025-02-06 16:56:34.370316+00|	timescale-cloud-model|	0.95|

Now you can seamlessly integrate Amazon SageMaker with {CLOUD_LONG} to store and analyze time-series data generated by
machine learning models. You can also untegrate visualization tools like [Grafana][grafana-integration] or
[Tableau][tableau-integration] with {CLOUD_LONG} to create real-time dashboards of your model predictions.

[about-hypertables]: /use-timescale/hypertables/
[amazon-sagemaker]: https://docs.aws.amazon.com/sagemaker/latest/dg/whatis.html
[aws-notebooks-git-repos]: https://console.aws.amazon.com/sagemaker/home#/notebooks-and-git-repos
[aws-sign-up]: https://signin.aws.amazon.com/signup?request_type=register
[connection-info]: /integrations/find-connection-details
[console]: https://console.cloud.timescale.com/dashboard/services
[grafana-integration]: /integrations/integrate/grafana
[psql]: /integrations/integrate/psql
[run-queries]: /getting-started/run-queries-from-console
[tableau-integration]: /integrations/integrate/tableau