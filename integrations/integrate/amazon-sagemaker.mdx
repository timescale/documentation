---
title: Integrate Amazon Sagemaker with Tiger Cloud
sidebarTitle: Amazon Sagemaker
description: Amazon SageMaker is a fully managed machine learning service. Integrate Amazon SageMaker with Tiger Cloud to store and analyze ML model data
products: [cloud, self_hosted]
---

import { CLOUD_LONG, CONSOLE,  SERVICE_SHORT } from '/snippets/vars.mdx';
import IntegrationPrereqCloud from "/snippets/prerequisites/_integration-prereqs-cloud-only.mdx";
import OldCreateHypertable from "/snippets/changes/_old-api-create-hypertable.mdx";

[Amazon SageMaker AI][Amazon Sagemaker] is a fully managed machine learning (ML) service. With SageMaker AI, data 
scientists and developers can quickly and confidently build, train, and deploy ML models into a production-ready 
hosted environment.

This page shows you how to integrate Amazon Sagemaker with a {SERVICE_LONG}.

## Prerequisites

<IntegrationPrereqCloud />

* Set up an [AWS Account][aws-sign-up]

## Prepare your {SERVICE_LONG} to ingest data from SageMaker

Create a table in {SERVICE_LONG} to store model predictions generated by SageMaker.

<Procedure>

1. **Connect to your {SERVICE_LONG}**

   For {CLOUD_LONG}, open an [SQL editor][run-queries] in [{CONSOLE}][open-console]. For {SELF_LONG}, use [`psql`][psql].

1. **For better performance and easier real-time analytics, create a hypertable**

   [Hypertables][about-hypertables] are {PG} tables that automatically partition your data by time. You interact
   with hypertables in the same way as regular {PG} tables, but with extra features that makes managing your
   time-series data much easier.

   ```sql
   CREATE TABLE model_predictions (
     time TIMESTAMPTZ NOT NULL,
     model_name TEXT NOT NULL,
     prediction DOUBLE PRECISION NOT NULL
   ) WITH (
     tsdb.hypertable,
     tsdb.partition_column='time'
   );
   ```
   <OldCreateHypertable />   

</Procedure>

## Create the code to inject data into a {SERVICE_LONG}

<Procedure>

1. **Create a SageMaker Notebook instance**

   1. In [Amazon SageMaker > Notebooks and Git repos][aws-notebooks-git-repos], click `Create Notebook instance`.
   1. Follow the wizard to create a default Notebook instance.

1. **Write a Notebook script that inserts data into your {SERVICE_LONG}**   

   1. When your Notebook instance is `inService,` click `Open JupyterLab` and click `conda_python3`. 
   1. Update the following script with your [connection details][connection-info], then paste it in the Notebook.

      ```python
      import psycopg2
      from datetime import datetime

      def insert_prediction(model_name, prediction, host, port, user, password, dbname):
            conn = psycopg2.connect(
               host=host,
               port=port,
               user=user,
               password=password,
               dbname=dbname
            )
            cursor = conn.cursor()

            query = """
               INSERT INTO model_predictions (time, model_name, prediction)
               VALUES (%s, %s, %s);
            """

            values = (datetime.utcnow(), model_name, prediction)
            cursor.execute(query, values)
            conn.commit()

            cursor.close()
            conn.close()

      # Example usage
      insert_prediction(
            model_name="example_model",
            prediction=0.95,
            host="<host>",
            port="<port>",
            user="<user>",
            password="<password>",
            dbname="<dbname>"
      )
      ```

1. **Test your SageMaker script**

   1. Run the script in your SageMaker notebook.
   1. Verify that the data is in your {SERVICE_SHORT}

      Open an [SQL editor][run-queries] and check the `sensor_data` table:

      ```sql
      SELECT * FROM model_predictions;
      ```
      You see something like:

      |time	| model_name | prediction |
      | -- | -- | -- |
      |2025-02-06 16:56:34.370316+00|	timescale-cloud-model|	0.95|

</Procedure>

Now you can seamlessly integrate Amazon SageMaker with {CLOUD_LONG} to store and analyze time-series data generated by 
machine learning models. You can also untegrate visualization tools like [Grafana][grafana-integration] or 
[Tableau][tableau-integration] with {CLOUD_LONG} to create real-time dashboards of your model predictions.






[Amazon Sagemaker]: https://docs.aws.amazon.com/sagemaker/latest/dg/whatis.html
[aws-sign-up]: https://signin.aws.amazon.com/signup?request_type=register
[install-aws-cli]: https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html
[install-python]: https://www.python.org/downloads/
[install-postgresql]: https://www.postgresql.org/download/
[console]: https://console.cloud.timescale.com/
[grafana-integration]: /integrations/:currentVersion:/grafana/
[tableau-integration]: /integrations/:currentVersion:/tableau/
[run-queries]: /getting-started/:currentVersion:/run-queries-from-console/
[open-console]: https://console.cloud.timescale.com/dashboard/services
[psql]: /integrations/:currentVersion:/psql/
[about-hypertables]: /use-timescale/:currentVersion:/hypertables/
[aws-notebooks-git-repos]:https://console.aws.amazon.com/sagemaker/home#/notebooks-and-git-repos
[secure-vpc-aws]: /use-timescale/:currentVersion:/vpc/
[connection-info]: /integrations/:currentVersion:/find-connection-details/
