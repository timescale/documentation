import EnableReplication from '/snippets/integrations/_enable-replication.mdx';
import { PG } from '/snippets/vars.mdx';

Updating parameters on a {PG} instance will cause an outage. Choose a time that will cause the least issues to tune this database.

1. **Update the DB instance parameter group for your source database**

   1. In [https://console.aws.amazon.com/rds/home#databases:][aws-databases],
      select the RDS instance to migrate.

   2. Click `Configuration`, scroll down and note the `DB instance parameter group`, then click `Parameter groups`

      ![Create security rule to enable RDS EC2 connection](https://assets.timescale.com/docs/images/migrate/awsrds-parameter-groups.png)

   3. Click `Create parameter group`, fill in the form with the following values, then click `Create`.
      - **Parameter group name** - whatever suits your fancy.
      - **Description** - knock yourself out with this one.
      - **Engine type** - `PostgreSQL`
      - **Parameter group family** - the same as `DB instance parameter group` in your `Configuration`.
   4. In `Parameter groups`, select the parameter group you created, then click `Edit`.
   5. Update the following parameters, then click `Save changes`.
      - `rds.logical_replication` set to `1`: record the information needed for logical decoding.
      - `wal_sender_timeout` set to `0`: disable the timeout for the sender process.

   6. In RDS, navigate back to your [databases][aws-databases], select the RDS instance to migrate, and click `Modify`.

   7. Scroll down to `Database options`, select your new parameter group, and click `Continue`.
   8. Click `Apply immediately` or choose a maintenance window, then click `Modify DB instance`.

      Changing parameters will cause an outage. Wait for the database instance to reboot before continuing.
   9. Verify that the settings are live in your database.

2. **Enable replication `DELETE` and `UPDATE` operations**

   <EnableReplication />

[aws-databases]: https://console.aws.amazon.com/rds/home#databases:
