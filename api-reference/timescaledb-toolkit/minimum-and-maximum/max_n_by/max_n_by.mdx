---
title: max_n_by()
description: Track the largest values and associated data in a set of values
topics: [hyperfunctions]
tags: [hyperfunctions, toolkit, maximum]
license: community
type: function
toolkit: true
hyperfunction:
  family: minimum and maximum
  type: aggregate
  aggregates:
    - max_n_by()
products: [cloud, mst, self_hosted]
---

<Icon icon="circle-play" iconType="duotone" /> Since 1.16.0

Construct an aggregate that keeps track of the largest values passed through it, as well as some associated data which
is passed alongside the value.


## Arguments

The syntax is:

```sql
max_n_by(
    value BIGINT | DOUBLE PRECISION | TIMESTAMPTZ,
    data ANYELEMENT,
    capacity BIGINT
) MaxNBy
```
| Name | Type | Default | Required | Description |
|--|--|--|--|--|
| `value` | BIGINT \| DOUBLE PRECISION \| TIMESTAMPTZ | - | ✔ | The values passed into the aggregate |
| `data` | ANYELEMENT | - | ✔ | The data associated with a particular value |
| `capacity` | BIGINT | - | ✔ | The number of values to retain. |

## Returns

| Column | Type | Description |
|--------|------|-------------|
| max_n_by | MaxNBy | The compiled aggregate. Note that the exact type will be MaxByInts, MaxByFloats, or MaxByTimes depending on the input type |
