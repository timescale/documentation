---
title: state_at()
description: Determine the state at a given time
license: community
type: function
toolkit: true
topics: [hyperfunctions]
hyperfunction:
  family: state tracking
  type: accessor
  aggregates:
    - state_agg()
---

<Icon icon="circle-play" iconType="duotone" /> Since 1.15.0

Determine the state at a given time from a state aggregate.

## Samples

Create a state aggregate and determine the state at a particular time.

```sql
SELECT state_at(
  (SELECT state_agg(ts, state) FROM states_test),
  '2020-01-01 00:00:05+00'
);
```

Returns:

```
state_at
----------
START
```

[state_agg]: /api-reference/timescaledb/hyperfunctions/state-tracking/state_agg/state_agg
## Arguments

The syntax is:

```sql
state_at(
  agg StateAgg,
  ts TIMESTAMPTZ
) RETURNS TEXT

state_at_int(
  agg StateAgg,
  ts TIMESTAMPTZ
) RETURNS BIGINT
```
| Name | Type | Default | Required | Description |
|------|------|---------|----------|-------------|
| agg | StateAgg | - | ✔ | A state aggregate created with [`state_agg`][state_agg] |
| ts | TIMESTAMPTZ | - | ✔ | The time to get the state at |

## Returns

| Column | Type | Description |
|--------|------|-------------|
| state | TEXT \| BIGINT | The state at the given time. |

