---
title: counter_agg()
description: Aggregate counter data into an intermediate form for further analysis
license: community
type: function
toolkit: true
hyperfunction:
  family: counters and gauges
  type: aggregate
  aggregates:
  - counter_agg()
topics:
- hyperfunctions
products:
- cloud
- mst
- self_hosted
---

<Icon icon="circle-play" iconType="duotone" /> Since 1.3.0

This is the first step for performing any aggregate calculations
on counter data. Use `counter_agg` to create an intermediate aggregate
from your data. This intermediate form can then be used
by one or more accessors in this group to compute final results. Optionally,
you can combine multiple intermediate aggregate objects using
[`rollup()`](#rollup) before an accessor is applied.

## Samples

Create a counter aggregate to summarize daily counter data.

```sql
SELECT
  time_bucket('1 day'::interval, ts) as dt,
  counter_agg(ts, val) AS cs
FROM foo
WHERE id = 'bar'
GROUP BY time_bucket('1 day'::interval, ts)
```
## Arguments

| Name | Type | Default | Required | Description |
| --- | --- | --- | --- | --- |
| `ts` | `TIMESTAMPTZ` | - | ✔ | The time at each point |
| `value` | `DOUBLE PRECISION` | - | ✔ | The value of the counter at each point |
| `bounds` | `TSTZRANGE` | - |  | The smallest and largest possible times that can be input to this aggregate. Bounds are required for extrapolation, but not for other accessor functions. If you don't specify bounds at aggregate creation time, you can add them later using the [`with_bounds`](#with_bounds) function. |


## Returns

| Column | Type | Description |
|--------|------|-------------|
| counter_agg | CounterSummary | The counter aggregate, containing data about the variables in an intermediate form. Pass the aggregate to accessor functions in the counter aggregates API to perform final calculations. Or, pass the aggregate to rollup functions to combine multiple counter aggregates into larger aggregates. |
