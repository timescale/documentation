---
title: candlestick_agg()
description: Aggregate tick data into an intermediate form for further calculation
topics: [hyperfunctions]
tags: [hyperfunctions, finance, candlestick, open, high, low, close]
license: community
type: function
experimental: false
toolkit: true
hyperfunction:
  family: financial analysis
  type: aggregate
  aggregates:
    - candlestick_agg()
products: [cloud, mst, self_hosted]
---

<Icon icon="circle-play" iconType="duotone" /> Since 1.14.0

This is the first step for performing financial calculations on raw tick
data. Use `candlestick_agg` to create an intermediate aggregate from your
tick data. This intermediate form can then be used by one or more accessors
in this group to compute final results.

Optionally, multiple such intermediate aggregate objects can be combined
using [`rollup()`](#rollup) before an accessor is applied.

If you're starting with pre-aggregated candlestick data rather than raw tick
data, use the companion [`candlestick()`](#candlestick) function instead.
This function transforms the existing aggregated data into the correct form
for use with the candlestick accessors.

## Arguments

| Name | Type | Default | Required | Description |
|--|--|--|--|--|
| `ts` | TIMESTAMPTZ | - | ✔ | Timestamp associated with stock price |
| `price` | DOUBLE PRECISION | - | ✔ | Stock quote/price at the given time |
| `volume` | DOUBLE PRECISION | - | ✔ | Volume of the trade |

## Returns

An object storing `(timestamp, value)` pairs for each of the opening, high, low, and closing prices, in addition to
information used to calculate the total volume and Volume Weighted Average Price.
