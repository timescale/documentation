---
title: add_dimension()
description: Add a space-partitioning dimension to a hypertable
topics: [hypertables]
keywords: [hypertables, partitions]
tags: [dimensions, chunks]
license: apache
type: function
products: [cloud, mst, self_hosted]
---

import DimensionInfo from '/snippets/api-reference/timescaledb/hypertables/_dimensions-info.mdx';
import { TIMESCALE_DB, CLOUD_LONG, HYPERTABLE, HYPERTABLE_CAP, CHUNK, PG } from '/snippets/vars.mdx';

Add an additional partitioning dimension to a {TIMESCALE_DB} {HYPERTABLE}. You can only execute this `add_dimension`
command
on an empty {HYPERTABLE}. To convert a normal table to a {HYPERTABLE}, call [create hypertable][create_hypertable].

The column you select as the dimension can use either:

- [Interval partitions][range-partition]: for example, for a second range partition.
- [hash partitions][hash-partition]: to enable parallelization across multiple disks.

<Note>
**These instructions are for self-hosted TimescaleDB deployments**

Best practice is to not use additional dimensions. However, {CLOUD_LONG} transparently provides seamless storage
scaling, both in terms of storage capacity and available storage IOPS/bandwidth.
</Note>

This page describes the generalized {HYPERTABLE} API introduced in {TIMESCALE_DB} v2.13.0.
For information about the deprecated interface, see [add_dimension(), deprecated interface][add-dimension-old].

## Samples

First convert table `conditions` to {HYPERTABLE} with just range
partitioning on column `time`, then add an additional partition key on
`location` with four partitions:

```sql
SELECT create_hypertable('conditions', by_range('time'));
SELECT add_dimension('conditions', by_hash('location', 4));
```

<Note>
The `by_range` and `by_hash` dimension builders are an addition to {TIMESCALE_DB} 2.13.
</Note>

Convert table `conditions` to {HYPERTABLE} with range partitioning on
`time` then add three additional dimensions: one hash partitioning on
`location`, one range partition on `time_received`, and one hash
partitionining on `device_id`.

```sql
SELECT create_hypertable('conditions', by_range('time'));
SELECT add_dimension('conditions', by_hash('location', 2));
SELECT add_dimension('conditions', by_range('time_received', INTERVAL '1 day'));
SELECT add_dimension('conditions', by_hash('device_id', 2));
SELECT add_dimension('conditions', by_hash('device_id', 2), if_not_exists => true);
```

## Arguments

The syntax is:

```sql
SELECT add_dimension(
    hypertable = '<hypertable_name>',
    dimension = by_range('<column_name>', '<interval>') | by_hash('<column_name>', <number_partitions>),
    if_not_exists = true | false
);
```

| Name | Type             | Default | Required | Description                                                                                                                                       |
|-|-|-|-|---------------------------------------------------------------------------------------------------------------------------------------------------|
|`chunk_time_interval` | INTERVAL         | -       | ✖ | Interval that each {CHUNK} covers. Must be > 0.                                                                                                     |
|`dimension` | [DIMENSION_INFO][dimension-info] | -       | ✔ | To create a `_timescaledb_internal.dimension_info` instance to partition a {HYPERTABLE}, you call  [`by_range`][by-range] and [`by_hash`][by-hash]. |
|`hypertable`| REGCLASS         | - | ✔ | The {HYPERTABLE} to add the dimension to.                                                                                                           |
|`if_not_exists` | BOOLEAN          | `false` | ✖ | Set to `true` to print an error if a dimension for the column already exists. By default an exception is raised.                                  |
|`number_partitions` | INTEGER          | -       | ✖ | Number of hash partitions to use on `column_name`. Must be > 0.                                                                                   |
|`partitioning_func` | REGCLASS         | -       | ✖ | The function to use for calculating a value's partition. See [`create_hypertable`][create_hypertable] for more information.                       |

<DimensionInfo />

## Returns

|Column|Type| Description                                                                                                 |
|-|-|-------------------------------------------------------------------------------------------------------------|
|`dimension_id`|INTEGER| ID of the dimension in the {TIMESCALE_DB} internal catalog                                                     |
|`created`|BOOLEAN| `true` if the dimension was added, `false` when you set `if_not_exists` to `true` and no dimension was added. |


[create_hypertable]: /api-reference/timescaledb/hypertables/create_hypertable
[add-dimension-old]: /api-reference/timescaledb/hypertables/add_dimension_old
[hash-partition]: /api-reference/timescaledb/hypertables/add_dimension#by_hash
[range-partition]: /api-reference/timescaledb/hypertables/add_dimension#by_range
[dimension-info]: /api-reference/timescaledb/hypertables/add_dimension#dimension-info
[by-range]: /api-reference/timescaledb/hypertables/add_dimension#by_range
[by-hash]: /api-reference/timescaledb/hypertables/add_dimension#by_hash
