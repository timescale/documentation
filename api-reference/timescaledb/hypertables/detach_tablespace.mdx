---
title: detach_tablespace()
description: Detach a tablespace from a hypertable
topics: [hypertables]
keywords: [tablespaces, hypertables, detach]
products: [cloud, mst, self_hosted]
license: apache
type: function
---


import { HYPERTABLE, HYPERTABLE_CAP, CHUNK, CHUNK_CAP } from '/snippets/vars.mdx';

Detach a tablespace from one or more {HYPERTABLE}s. This _only_ means
that _new_ {CHUNK}s are not placed on the detached tablespace. This
is useful, for instance, when a tablespace is running low on disk
space and one would like to prevent new {CHUNK}s from being created in
the tablespace. The detached tablespace itself and any existing {CHUNK}s
with data on it remains unchanged and continue to work as
before, including being available for queries. Note that newly
inserted data rows may still be inserted into an existing {CHUNK} on the
detached tablespace since existing data is not cleared from a detached
tablespace. A detached tablespace can be reattached if desired to once
again be considered for {CHUNK} placement.

## Samples

Detach the tablespace `disk1` from the {HYPERTABLE} `conditions`:

```sql
SELECT detach_tablespace('disk1', 'conditions');
SELECT detach_tablespace('disk2', 'conditions', if_attached => true);
```

Detach the tablespace `disk1` from all {HYPERTABLE}s that the current
user has permissions for:

```sql
SELECT detach_tablespace('disk1');
```

## Arguments

The syntax is:

```sql
SELECT detach_tablespace(
    tablespace = '<tablespace_name>',
    hypertable = '<hypertable_name>',
    if_attached = true | false
);
```

|Name|Type| Default | Required | Description|
|---|---|---|---|---|
| `tablespace` | TEXT | - | ✔ | Tablespace to detach.|
| `hypertable` | REGCLASS | - | ✖ | Hypertable to detach a the tablespace from.|
| `if_attached` | BOOLEAN | `FALSE` | ✖ | Set to true to avoid throwing an error if the tablespace is not attached to the given table. A notice is issued instead. |

When giving only the tablespace name as argument, the given tablespace
is detached from all {HYPERTABLE}s that the current role has the
appropriate permissions for. Therefore, without proper permissions,
the tablespace may still receive new {CHUNK}s after this command
is issued.

When specifying a specific {HYPERTABLE}, the tablespace is only
detached from the given {HYPERTABLE} and thus may remain attached to
other {HYPERTABLE}s.
