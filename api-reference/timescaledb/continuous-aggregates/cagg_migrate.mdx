---
title: cagg_migrate()
description: Migrate a continuous aggregate from the old format to the new format introduced in TimescaleDB 2.7
topics: [continuous aggregates]
keywords: [continuous aggregates]
tags: [migrate]
license: community
type: procedure
products: [cloud, self_hosted, mst]
---

import { CAGG, TIMESCALE_DB } from '/snippets/vars.mdx';

Migrate a {CAGG} from the old format to the new format introduced
in {TIMESCALE_DB} 2.7.

```sql
CALL cagg_migrate (
    cagg REGCLASS,
    override BOOLEAN DEFAULT FALSE,
    drop_old BOOLEAN DEFAULT FALSE
);
```

{TIMESCALE_DB} 2.7 introduced a new format for {CAGG}s that improves
performance. It also makes {CAGG}s compatible with more types of
SQL queries.

The new format, also called the finalized format, stores the {CAGG} data exactly as it appears in the final view. The
old format, also
called the partial format, stores the data in a partially aggregated state.

Use this procedure to migrate {CAGG}s from the old format to the
new format.

For more information, see the [migration how-to guide][how-to-migrate].

<Warning>
There are known issues with `cagg_migrate()` in version {TIMESCALE_DB} 2.8.0.
Upgrade to version 2.8.1 or above before using it.
</Warning>

## Arguments

The syntax is:

```sql
CALL cagg_migrate(
    cagg = '<view_name>',
    override = true | false,
    drop_old = true | false
);
```

| Name | Type | Default | Required | Description |
|-|-|-|-|-|
| `cagg` | `REGCLASS` | - | âœ” | The {CAGG} to migrate |
| `override` | `BOOLEAN` | `false` | - | If false, the old {CAGG} keeps its name. The new {CAGG} is named `<OLD_CONTINUOUS_AGGREGATE_NAME>_new`. If true, the new {CAGG} gets the old name. The old {CAGG} is renamed `<OLD_CONTINUOUS_AGGREGATE_NAME>_old`. |
| `drop_old` | `BOOLEAN` | `false` | - | If true, the old {CAGG} is deleted. Must be used together with `override`. |

[how-to-migrate]: /use-timescale/latest/continuous-aggregates/migrate/
