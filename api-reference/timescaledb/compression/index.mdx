---
title: Compression overview (Old API, replaced by Hypercore)
sidebarTitle: Overview
description: TimescaleDB API reference for compressing your data. Includes SQL functions for compressing and decompressing chunks, managing compression policies, and getting compression stats
keywords: [compression]
tags: [hypertables]
products: [cloud, mst, self_hosted]
---

import { HYPERTABLE, CHUNK, HYPERCORE, TIMESCALE_DB } from '/snippets/vars.mdx';

Old API since [{TIMESCALE_DB} v2.18.0](https://github.com/timescale/timescaledb/releases/tag/2.18.0). Replaced by [Hypercore][hypercore].

Compression functionality is included in {HYPERCORE}.

Before you set up compression, you need to [configure the {HYPERTABLE} for compression][configure-compression] and then [set up a compression policy][add-compression-policy].

<Note>
Before you set up compression for the first time, read the compression [blog post][compression-blog] and [documentation][compression-docs].
</Note>

You can also [compress {CHUNK}s manually][compress-chunk], instead of using an automated compression policy to compress {CHUNK}s as they age.

Compressed {CHUNK}s have the following limitations:

- `ROW LEVEL SECURITY` is not supported on compressed {CHUNK}s.
- Creation of unique constraints on compressed {CHUNK}s is not supported. You can add them by disabling compression on the {HYPERTABLE} and re-enabling after constraint creation.

## Restrictions

In general, compressing a {HYPERTABLE} imposes some limitations on the types of data modifications that you can perform on data inside a compressed {CHUNK}.

This table shows changes to the compression feature, added in different versions of {TIMESCALE_DB}:

| {TIMESCALE_DB} version | Supported data modifications on compressed {CHUNK}s |
|-|-|
| 1.5 - 2.0 | Data and schema modifications are not supported. |
| 2.1 - 2.2 | Schema may be modified on compressed {HYPERTABLE}s. Data modification not supported. |
| 2.3 | Schema modifications and basic insert of new data is allowed. Deleting, updating and some advanced insert statements are not supported. |
| 2.11 | Deleting, updating and advanced insert statements are supported. |

In {TIMESCALE_DB} 2.1 and later, you can modify the schema of {HYPERTABLE}s that have compressed {CHUNK}s. Specifically, you can add columns to and rename existing columns of compressed {HYPERTABLE}s.

In {TIMESCALE_DB} v2.3 and later, you can insert data into compressed {CHUNK}s and to enable compression policies on distributed {HYPERTABLE}s.

In {TIMESCALE_DB} v2.11 and later, you can update and delete compressed data. You can also use advanced insert statements like `ON CONFLICT` and `RETURNING`.

## Available functions

### Configuration

- [`ALTER TABLE (Compression)`][alter-table-compression]: change compression settings on a compressed {HYPERTABLE}

### Policies

- [`add_compression_policy()`][add-compression-policy]: add policy to schedule automatic compression of {CHUNK}s
- [`remove_compression_policy()`][remove-compression-policy]: remove a compression policy from a {HYPERTABLE}

### Manual compression

- [`compress_chunk()`][compress-chunk]: manually compress a given {CHUNK}
- [`decompress_chunk()`][decompress-chunk]: decompress a compressed {CHUNK}
- [`recompress_chunk()`][recompress-chunk]: recompress a {CHUNK} that had new data inserted after compression

### Statistics

- [`chunk_compression_stats()`][chunk-compression-stats]: get compression-related statistics for {CHUNK}s
- [`hypertable_compression_stats()`][hypertable-compression-stats]: get {HYPERTABLE} statistics related to compression

[hypercore]: /api-reference/timescaledb/hypercore
[configure-compression]: /api-reference/timescaledb/compression/alter_table_compression
[add-compression-policy]: /api-reference/timescaledb/compression/add_compression_policy
[compress-chunk]: /api-reference/timescaledb/compression/compress_chunk
[compression-blog]: https://www.timescale.com/blog/building-columnar-compression-in-a-row-oriented-database
[compression-docs]: /use-timescale/compression
[alter-table-compression]: /api-reference/timescaledb/compression/alter_table_compression
[remove-compression-policy]: /api-reference/timescaledb/compression/remove_compression_policy
[decompress-chunk]: /api-reference/timescaledb/compression/decompress_chunk
[recompress-chunk]: /api-reference/timescaledb/compression/recompress_chunk
[chunk-compression-stats]: /api-reference/timescaledb/compression/chunk_compression_stats
[hypertable-compression-stats]: /api-reference/timescaledb/compression/hypertable_compression_stats
